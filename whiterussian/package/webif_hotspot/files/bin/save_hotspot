#!/bin/sh
# HotSpot add-on module to webif^2 v1.0
# by Liran Tal <liran@enginx.com>
#
# this module is part of the webif^2 interface for the x-wrt.
# thanks to thepeople and nbd for their help to understand the webif

nvram show 2>/dev/null | sed '/^chilli_/!d; s/^chilli_//;' | awk -F '=' '
BEGIN {
	booleanfields = "^(debug|macauth|uamanydns|coanoipcheck|acctupdate)$"
	print "# this file is automatically generated"
}
$2 == "" { next };
{
	if ($1 ~ booleanfields) {
		if ($2 == "1") print $1
	} else print $1 " " $2
}' > /etc/chilli.conf
